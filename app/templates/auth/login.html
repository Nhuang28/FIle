{% extends "base.html" %}

{% block title %}Log In - LearnLoop{% endblock %}

{% block content %}
<div class="sticky top-0 z-10 bg-[#E8E9E8] flex items-center p-4 justify-between">
    <div
        class="text-black flex size-10 shrink-0 items-center justify-center rounded-full hover:bg-black/5 cursor-pointer transition-colors">
        <span class="material-symbols-outlined text-2xl">arrow_back_ios_new</span>
    </div>
    <h2 class="text-black text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center pr-10">
        Log In</h2>
</div>

<main class="flex-1 flex flex-col max-w-md mx-auto w-full pb-10">
    <div class="px-6 pt-12">
    </div>

    <form class="mx-6 mt-8 space-y-6 bg-black p-8 rounded-3xl shadow-xl" method="POST"
        action="{{ url_for('auth.login') }}">
        <div class="space-y-1.5">
            <label class="text-sm font-medium text-white ml-1">Email Address</label>
            <div class="relative">
                <span
                    class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl">mail</span>
                <input name="email" required
                    class="w-full bg-gray-900 border-gray-800 rounded-xl py-4 pl-12 pr-4 text-white placeholder:text-gray-500 focus:ring-2 focus:ring-white focus:border-transparent outline-none transition-all"
                    placeholder="alex@example.com" type="email" />
            </div>
        </div>
        <div class="space-y-1.5">
            <div class="flex items-center justify-between ml-1">
                <label class="text-sm font-medium text-white">Password</label>
                <a class="text-xs font-semibold text-gray-400 hover:text-white hover:underline" href="#">Forgot
                    Password?</a>
            </div>
            <div class="relative">
                <span
                    class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl">lock</span>
                <input name="password" id="passwordInput" required
                    class="w-full bg-gray-900 border-gray-800 rounded-xl py-4 pl-12 pr-12 text-white placeholder:text-gray-500 focus:ring-2 focus:ring-white focus:border-transparent outline-none transition-all"
                    placeholder="••••••••" type="password" />
                <button class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white" type="button"
                    id="togglePassword">
                    <span class="material-symbols-outlined text-xl">visibility</span>
                </button>
            </div>
        </div>
        <button
            class="w-full bg-white hover:bg-gray-100 text-black font-bold py-4 rounded-xl shadow-lg transition-all mt-4 flex items-center justify-center gap-2"
            type="submit">
            Log In
            <span class="material-symbols-outlined text-lg">login</span>
        </button>

        <div class="relative py-2">
            <div class="absolute inset-0 flex items-center">
                <div class="w-full border-t border-gray-800"></div>
            </div>
            <div class="relative flex justify-center text-sm">
                <span class="bg-black px-2 text-gray-500">Or</span>
            </div>
        </div>

        <a href="{{ url_for('auth.register') }}"
            class="w-full bg-gray-900 border border-gray-800 text-white font-bold py-4 rounded-xl hover:bg-gray-800 transition-all flex items-center justify-center gap-2">
            Sign Up
        </a>
    </form>
</main>
<div class="fixed top-0 right-0 -z-10 w-64 h-64 bg-gray-900/5 rounded-full blur-3xl"></div>
<div class="fixed bottom-0 left-0 -z-10 w-80 h-80 bg-gray-900/5 rounded-full blur-3xl"></div>

<script>
    const togglePassword = document.querySelector('#togglePassword');
    const password = document.querySelector('#passwordInput');

    togglePassword.addEventListener('click', function (e) {
        // toggle the type attribute
        const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
        password.setAttribute('type', type);

        // toggle the icon
        const iconSpan = this.querySelector('span');
        if (type === 'text') {
            iconSpan.textContent = 'visibility_off';
        } else {
            iconSpan.textContent = 'visibility';
        }
    });
</script>
{% endblock %}