{% extends "base.html" %}

{% block title %}Join Class - LearnLoop{% endblock %}

{% block content %}
<div class="flex items-center p-4 pb-2 justify-between max-w-md mx-auto sticky top-0 z-10 bg-[#E8E9E8]">
    <a href="{{ url_for('main.dashboard') }}"
        class="text-black flex size-12 shrink-0 items-center justify-center cursor-pointer rounded-full hover:bg-black/5 transition-colors">
        <span class="material-symbols-outlined text-[24px]">arrow_back_ios_new</span>
    </a>
    <h2 class="text-black text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center">
        Join a Class</h2>
    <div class="size-12"></div> <!-- Spacer for centering -->
</div>

<div class="flex-1 flex flex-col px-4 max-w-md mx-auto w-full pb-20">
    <!-- HeadlineText -->
    <h1 class="text-black tracking-light text-[32px] font-bold leading-tight text-left pb-2 pt-6">
        Enter Invite Code</h1>
    <!-- BodyText -->
    <p class="text-gray-600 text-base font-normal leading-normal pb-6 pt-1">
        Enter the 6-character invite code provided by your teacher to access the class materials.
    </p>

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div
        class="mb-6 p-4 rounded-xl flex items-start gap-3 {% if category == 'success' %}bg-green-100 border border-green-200{% else %}bg-red-100 border border-red-200{% endif %}">
        <span
            class="material-symbols-outlined {% if category == 'success' %}text-green-700{% else %}text-red-700{% endif %} mt-0.5">
            {% if category == 'success' %}check_circle{% else %}error{% endif %}
        </span>
        <p class="text-black text-sm font-medium">
            {{ message }}
        </p>
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}

    <form method="POST" class="flex flex-col gap-4 py-6 px-6 bg-black rounded-3xl shadow-xl">
        <label class="flex flex-col w-full">
            <p class="text-white text-sm font-semibold leading-normal pb-2 px-1 uppercase tracking-wider">
                Invite Code</p>
            <div class="relative">
                <input name="invite_code" type="text" maxlength="6"
                    class="form-input flex w-full rounded-xl text-white focus:outline-0 focus:ring-2 focus:ring-white border border-gray-800 bg-gray-900 focus:border-white h-14 placeholder:text-gray-600 p-[15px] text-lg font-mono tracking-widest uppercase text-center"
                    placeholder="XY1234" required />
            </div>
        </label>
        <p class="text-gray-400 text-xs px-1">
            Codes include numbers and letters (e.g., HIST01).
        </p>

        <!-- Submit Button -->
        <div class="mt-4">
            <button type="submit"
                class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-xl h-14 px-5 bg-white text-black text-lg font-bold leading-normal tracking-[0.015em] shadow-lg hover:bg-gray-100 transition-colors">
                <span class="truncate">Join Class</span>
            </button>
        </div>
    </form>

    <!-- Secondary Action / Help -->
    <div class="mt-auto pt-10 flex flex-col items-center gap-4">
        <div class="w-full h-px bg-gray-300"></div>
        <button class="text-gray-500 text-sm font-medium hover:text-black transition-colors">
            Can't find your code? Ask your teacher.
        </button>
    </div>
</div>
{% endblock %}