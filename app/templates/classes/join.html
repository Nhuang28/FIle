{% extends "base.html" %}

{% block title %}Join Class - LearnLoop{% endblock %}

{% block content %}
<div
    class="relative flex h-screen max-h-[844px] w-full max-w-md mx-auto flex-col bg-background-light dark:bg-background-dark overflow-hidden">
    <!-- TopAppBar -->
    <div class="flex items-center bg-background-light dark:bg-background-dark p-4 pb-2 justify-between">
        <a href="{{ url_for('main.dashboard') }}"
            class="text-slate-900 dark:text-white flex size-12 shrink-0 items-center cursor-pointer">
            <span class="material-symbols-outlined text-[24px]">arrow_back_ios</span>
        </a>
        <h2
            class="text-slate-900 dark:text-white text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center">
            Join a Class</h2>
        <div class="size-12"></div> <!-- Spacer for centering -->
    </div>

    <form method="POST" class="flex-1 flex flex-col px-4">
        <!-- HeadlineText -->
        <h1
            class="text-slate-900 dark:text-white tracking-light text-[32px] font-bold leading-tight text-left pb-2 pt-6">
            Join a Class</h1>
        <!-- BodyText -->
        <p class="text-slate-600 dark:text-slate-400 text-base font-normal leading-normal pb-6 pt-1">
            Enter the invite code provided by your teacher to access the class materials and start your loops.
        </p>

        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <div class="mb-6 space-y-2">
            {% for category, message in messages %}
            <div
                class="p-4 rounded-xl flex items-start gap-3 {% if category == 'error' %}bg-red-500/10 border border-red-500/30 text-red-500{% else %}bg-primary/10 border border-primary/30 text-primary{% endif %}">
                <span class="material-symbols-outlined mt-0.5">info</span>
                <p class="text-sm font-medium">{{ message }}</p>
            </div>
            {% endfor %}
        </div>
        {% endif %}
        {% endwith %}

        <!-- TextField -->
        <div class="flex flex-col gap-4 py-3">
            <label class="flex flex-col w-full">
                <p
                    class="text-slate-900 dark:text-white text-sm font-semibold leading-normal pb-2 px-1 uppercase tracking-wider">
                    Invite Code</p>
                <div class="relative">
                    <input name="invite_code" required
                        class="form-input flex w-full rounded-xl text-slate-900 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-slate-300 dark:border-[#3b4354] bg-white dark:bg-[#1c1f27] focus:border-primary h-14 placeholder:text-slate-400 dark:placeholder:text-[#9da6b9] p-[15px] text-lg font-mono tracking-widest uppercase"
                        placeholder="AB12-XY" />
                </div>
            </label>
            <p class="text-slate-500 dark:text-slate-500 text-xs px-1">
                Codes are 6 characters long and include numbers and letters.
            </p>
        </div>

        <!-- Submit Button -->
        <div class="mt-4">
            <button type="submit"
                class="flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-xl h-14 px-5 bg-primary text-white text-lg font-bold leading-normal tracking-[0.015em] shadow-lg shadow-primary/20 hover:bg-primary/90 transition-colors">
                <span class="truncate">Join Class</span>
            </button>
        </div>

        <!-- Secondary Action / Help -->
        <div class="mt-auto pb-10 flex flex-col items-center gap-4">
            <div class="w-full h-px bg-slate-200 dark:bg-slate-800"></div>
            <button type="button"
                class="text-slate-500 dark:text-slate-400 text-sm font-medium hover:text-primary transition-colors">
                Can't find your code? Ask your teacher.
            </button>
        </div>
    </form>
</div>
{% endblock %}